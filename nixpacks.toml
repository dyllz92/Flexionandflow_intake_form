[build]
builder = "nixpacks"

[deploy]
# Start command for the service
startCommand = "npm start"

# Health check configuration
# Path to health endpoint
healthcheckPath = "/health"

# Timeout for individual health check requests (10 seconds)
healthcheckTimeout = 30000

# Interval between health checks (30 seconds)
healthcheckInterval = 30000

# Time to wait before starting health checks (allows server to initialize)
startupTimeout = 60000

# Restart policy: "always", "never", "on-failure"
restartPolicyType = "always"

# Graceful shutdown
drainingSeconds = 10

[phases.install]
cmds = ["npm ci --omit=dev"]

[env]
# Example: LOG_LEVEL = "info"